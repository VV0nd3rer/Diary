<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en" ng-app="signup">
<head>
    <meta charset="UTF-8">
    <object th:include="include-res::links" th:remove="tag"/>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.4/angular-material.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-animate.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-aria.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-messages.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.4/angular-material.min.js"></script>
    <script type="text/javascript" th:src="@{/resources/js/app.js}"></script>
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <title>Sigh up</title>
</head>
<body>
    <div th:replace="header :: header">&nbsp;</div>

    <div class="container">
        <div class="row" ng-controller="userController">
            <div class="col-md-6 col-md-offset-4">
                <md-content layout-padding>
                    <form name="signupForm" ng-submit="addUser()">
                        <md-input-container class="md-block">
                            <label>Username</label>
                            <input md-maxlength="30" required name="username" ng-model="username" username-available
                                   ng-model-options="{ updateOn: 'blur' }">
                            <div ng-if="signupForm.$pending.usernameExists">checking....</div>
                            <div ng-if="signupForm.$error.usernameExists">username exists already</div>
                            <div ng-messages="signupForm.username.$error">
                                <div ng-message="required">This is required.</div>
                                <div ng-message="md-maxlength">The description must be less than 30 characters long.</div>
                                <span ng-show="signupForm.username.$invalid">This field is invalid </span>
                            </div>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Email</label>
                            <input required type="email" name="email" ng-model="email"
                                   minlength="10" maxlength="100" ng-pattern="/^.+@.+\..+$/"
                                   email-available ng-model-options="{ updateOn: 'blur' }" />
                            <div ng-if="signupForm.$pending.emailExists">checking....</div>
                            <div ng-if="signupForm.$error.emailExists">email exists already</div>
                            <div ng-messages="signupForm.email.$error" role="alert">
                                <div ng-message-exp="['required', 'minlength', 'maxlength', 'pattern']">
                                    Your email must be between 10 and 100 characters long and look like an e-mail address.
                                </div>
                                <span ng-show="signupForm.email.$invalid">This field is invalid </span>
                            </div>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Password</label>
                            <input required type="password" name="password" ng-model="password"
                                   minlength="6" maxlength="12"
                                   password-verify="{{confirm_password}}"/>

                            <div ng-messages="signupForm.password.$error" role="alert">
                                <div ng-message-exp="['required', 'minlength', 'maxlength']">
                                    Your password must be between 6 and 12 characters long.
                                </div>
                                <div ng-message="passwordVerify">No match!</div>

                            </div>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Confirm password</label>
                            <input required type="password" name="confirm_password" ng-model="confirm_password"
                                   minlength="6" maxlength="12"
                                   password-verify="{{password}}"/>

                            <div ng-messages="signupForm.password.$error" role="alert">
                                <div ng-message-exp="['required', 'minlength', 'maxlength']">
                                    Your password must be between 6 and 12 characters long.
                                </div>
                                <div ng-message="passwordVerify">No match!</div>

                            </div>
                        </md-input-container>
                        <div>
                            <md-button type="submit" ng-disabled="signupForm.$invalid">Submit</md-button>
                        </div>
                    </form>
                </md-content>
            </div>
        </div>
    </div>

<div layout="column" ng-cloak>
</div>
</body>
</html>